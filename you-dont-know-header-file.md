## 你不知道的(\*.h)头文件

刚刚开始接触计算机编程，可能学习的第一门编译型语言就是C语言；读到这里可能这与我们的话题有什么关系？！是的，刚开始写HelloWorld时的确不会用到头文件，但是随着学习阶段的不断深入，慢慢就开始写多文件Hybrid编译；

```
// a.h
int sum(int a, int b);

// a.c
int sum(int a, int b) {
    return a + b;
}

// main.c
#include<stdio.h>
// 没有引入a.h头文件
int main(int argc, char* argv[]) {
    printf("%d\n", sum(1,2));
    return 0;
}

// compile
$gcc main.c a.c
```

大家可以猜测一下，上面的代码可以成功编译吗？！

回答：答案是肯定的，大家可以动手尝试一下；

### 0x00 头文件的作用

这里先看一下头文件的作用：

1. 宏定义
2. 定义常量
3. 声明属性
4. 声明方法
5. 其它

我们首先按常（套）理（路），在`main.c`中引入头文件，进行`预处理`之后的文件内容是什么样子的

```
// gcc -E main.c 生成以下内容

// 此处省略stdio.h的内容，展开后大约800+行代码

# 1 "a.h" 1
int sum(int a, int b);

int
main() {
    printf("%d\n", sum(1, 2));
    return 0;
}

```

可以看到，引入头文件的作用，仅仅展开头文件中的声明(不包含宏定义)；展开后，就在main.c文件中做了一个前置声明，因为在C语言中，没有声明（或没有定义）的方法之前不可以调用，即使我们没有在a.c文件中实现a.h中声明的方法，在程序链接之前也不会报错；

### 0x01 替换头文件的扩展名

对，你猜得没有错，头文件的扩展名可以任意替换，我们试试一下：

```
// a.x a.txt a.md a.html
int sum(int a, int b);

// main.c

#include "a.html"

int
main(int argc, char* argv[])
{
    return 0;
}

// 经编译器预处理之后

# 1 "a.html" 1
static double math_pi = 3.1415926;
int my_sum(int a, int b);
```

结果就是并不影响预处理的结果，也不影响编译的最后可执行结果；

### 0x02 在C++中的情况如何呢？

情况与上面的情形类似，不一样的情况是这样的，如果头文件声明了class类型，实现文件中必须引入该头文件，否则会出现编译报错，大家自行体会；

> NOTE: 其它的面向对象的编程语言类似，如Objective-C，也是如此；

写这篇文章的原因是突然想到为什么在编程过程中写如此多的头文件，不写会出现什么样的情形等等脑洞大开的想法；

### 0x03 基本原则

**变量，或函数，可以被声明多次；但是仅能被定义一次；**
